import{j as e}from"./ui-vendor-CAfyCkep.js";import{i as s,a}from"./react-vendor-CU4acDdt.js";import{H as t,F as i}from"./Footer-ClmmIlI9.js";import{B as r}from"./input-BJZPTSgB.js";import{C as n,a as d,b as l,d as c,e as m}from"./card-kDPgC5Au.js";import{B as o}from"./badge-BaDuoVI_.js";import{s as x}from"./index-jEC04_G8.js";import{U as h,w as u,J as j,S as p,D as v,i as N,m as g,P as f,L as b,V as y}from"./utils-vendor-CvOzdFGV.js";import"./separator--QGibGZ_.js";import"./auth-vendor-DvA6JlK5.js";import"./query-vendor-Co6lwUYv.js";const w=()=>{const w=s(),[S,P]=a.useState("overview"),[$,_]=a.useState(null),[C,D]=a.useState(!0),[M,U]=a.useState([]),[k,A]=a.useState(null);if(a.useEffect(()=>{var e,s,a;e=null,s=null,a=function*(){const{data:{user:e}}=yield x.auth.getUser();if(e){_(e);try{const{data:s}=yield x.from("subscriptions").select("*").eq("user_id",e.id).order("created_at",{ascending:!1}).limit(1);A(s&&s.length>0?s[0]:null)}catch(s){A(null)}try{const{data:s}=yield x.from("payments").select("*").eq("user_id",e.id).order("created_at",{ascending:!1}).limit(10);U(s||[])}catch(s){U([])}D(!1)}else w("/login")},new Promise((t,i)=>{var r=e=>{try{d(a.next(e))}catch(s){i(s)}},n=e=>{try{d(a.throw(e))}catch(s){i(s)}},d=e=>e.done?t(e.value):Promise.resolve(e.value).then(r,n);d((a=a.apply(e,s)).next())});const{data:{subscription:t}}=x.auth.onAuthStateChange((e,s)=>{"SIGNED_OUT"!==e&&s||w("/login")});return()=>t.unsubscribe()},[w]),C)return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{children:"Loading dashboard..."})]})});const E=k?{name:k.plan_name||"Plan",price:"business"===k.plan_type?"$199":"$99",period:"/yr",renewsOn:k.end_date?`Renews/Ends on ${new Date(k.end_date).toLocaleDateString()}`:"",status:(k.status||"active").replace(/\b\w/g,e=>e.toUpperCase())}:{name:"Standard",price:"$49",period:"/month",renewsOn:"March 15, 2024",status:"Active"},F=M&&M.length>0?M.map(e=>({id:e.id,date:e.created_at?new Date(e.created_at).toLocaleDateString():"",amount:`${e.currency||"USD"} ${Number(e.amount||0).toFixed(2)}`,status:"completed"===(e.status||"").toString().toLowerCase()?"Paid":e.status||"Pending",description:`${e.plan_name||"Plan"}${e.plan_type?` - ${e.plan_type}`:""}`})):[{id:1,date:"Feb 15, 2024",amount:"$49.00",status:"Paid",description:"Standard Plan - Monthly"},{id:2,date:"Jan 15, 2024",amount:"$49.00",status:"Paid",description:"Standard Plan - Monthly"},{id:3,date:"Dec 15, 2023",amount:"$49.00",status:"Paid",description:"Standard Plan - Monthly"}];function L({plan:s}){return e.jsxs(e.Fragment,{children:[e.jsxs(n,{children:[e.jsx(l,{children:e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(y,{className:"w-5 h-5"}),"Current Plan"]})}),e.jsxs(d,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"text-xl font-semibold",children:s.name}),e.jsx(o,{variant:"secondary",children:s.status})]}),e.jsxs("p",{className:"text-muted-foreground",children:[s.price,s.period," ",s.renewsOn?`â€¢ ${s.renewsOn}`:""]})]}),e.jsx(r,{children:"Upgrade Plan"})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 pt-4 border-t",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:"15"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Support Sessions"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:"24/7"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Monitoring"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:"5"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Devices Managed"})]})]})]})]}),e.jsxs(n,{children:[e.jsx(l,{children:e.jsx(c,{children:"Quick Actions"})}),e.jsx(d,{children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(r,{variant:"outline",className:"h-auto p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(j,{className:"w-6 h-6 mx-auto mb-2"}),e.jsx("div",{className:"font-medium",children:"Request Support"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Get help with your devices"})]})}),e.jsx(r,{variant:"outline",className:"h-auto p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(v,{className:"w-6 h-6 mx-auto mb-2"}),e.jsx("div",{className:"font-medium",children:"Download Remote Tool"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Allow technician access"})]})})]})})]})]})}return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(t,{}),e.jsxs("div",{className:"container py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Customer Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your account and view support details"})]}),e.jsxs("div",{className:"grid lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx(n,{children:e.jsx(d,{className:"p-4",children:e.jsxs("nav",{className:"space-y-2",children:[e.jsxs(r,{variant:"overview"===S?"default":"ghost",className:"w-full justify-start",onClick:()=>P("overview"),children:[e.jsx(h,{className:"w-4 h-4 mr-2"}),"Overview"]}),e.jsxs(r,{variant:"billing"===S?"default":"ghost",className:"w-full justify-start",onClick:()=>P("billing"),children:[e.jsx(u,{className:"w-4 h-4 mr-2"}),"Billing"]}),e.jsxs(r,{variant:"support"===S?"default":"ghost",className:"w-full justify-start",onClick:()=>P("support"),children:[e.jsx(j,{className:"w-4 h-4 mr-2"}),"Support"]}),e.jsxs(r,{variant:"settings"===S?"default":"ghost",className:"w-full justify-start",onClick:()=>P("settings"),children:[e.jsx(p,{className:"w-4 h-4 mr-2"}),"Settings"]})]})})})}),e.jsxs("div",{className:"lg:col-span-3 space-y-6",children:["overview"===S&&e.jsx(L,{plan:E}),"billing"===S&&e.jsxs(e.Fragment,{children:[e.jsxs(n,{children:[e.jsxs(l,{children:[e.jsx(c,{children:"Payment History"}),e.jsx(m,{children:"View your billing history and download invoices"})]}),e.jsx(d,{children:e.jsx("div",{className:"space-y-4",children:F.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.description}),e.jsx("div",{className:"text-sm text-muted-foreground",children:s.date})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-medium",children:s.amount}),e.jsx(o,{variant:"Paid"===s.status?"secondary":"destructive",children:s.status})]}),e.jsx(r,{variant:"ghost",size:"sm",children:e.jsx(v,{className:"w-4 h-4"})})]},s.id))})})]}),e.jsxs(n,{children:[e.jsxs(l,{children:[e.jsx(c,{children:"Upgrade Your Plan"}),e.jsx(m,{children:"Get more features with our premium plans"})]}),e.jsx(d,{children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Premium Plan"}),e.jsxs("div",{className:"text-2xl font-bold mb-1",children:["$99",e.jsx("span",{className:"text-sm font-normal",children:"/month"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"24/7 priority support + advanced monitoring"}),e.jsx(r,{className:"w-full",children:"Upgrade to Premium"})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Enterprise Plan"}),e.jsxs("div",{className:"text-2xl font-bold mb-1",children:["$199",e.jsx("span",{className:"text-sm font-normal",children:"/month"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Dedicated technician + unlimited devices"}),e.jsx(r,{variant:"outline",className:"w-full",children:"Contact Sales"})]})]})})]})]}),"support"===S&&e.jsxs(n,{children:[e.jsxs(l,{children:[e.jsx(c,{children:"Support Messages"}),e.jsx(m,{children:"Recent updates from our support team"})]}),e.jsx(d,{children:e.jsx("div",{className:"space-y-4",children:[{id:1,date:"Today",message:"Your system optimization is complete. Everything is running smoothly!",from:"Tech Support"},{id:2,date:"Yesterday",message:"Scheduled maintenance completed successfully. No action required.",from:"System Admin"},{id:3,date:"3 days ago",message:"Monthly security scan completed. No threats detected.",from:"Security Team"}].map(s=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"font-medium",children:s.from}),e.jsx("div",{className:"text-sm text-muted-foreground",children:s.date})]}),e.jsx("p",{className:"text-sm",children:s.message})]},s.id))})})]}),"settings"===S&&e.jsxs(n,{children:[e.jsxs(l,{children:[e.jsx(c,{children:"Account Settings"}),e.jsx(m,{children:"Manage your account information and preferences"})]}),e.jsx(d,{className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(N,{className:"w-5 h-5"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Email Address"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"customer@example.com"})]})]}),e.jsx(r,{variant:"outline",size:"sm",children:e.jsx(g,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(f,{className:"w-5 h-5"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Phone Number"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"+1 (555) 123-4567"})]})]}),e.jsx(r,{variant:"outline",size:"sm",children:e.jsx(g,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(b,{className:"w-5 h-5"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Password"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Last changed 3 months ago"})]})]}),e.jsx(r,{variant:"outline",size:"sm",children:"Change"})]})]})})]})]})]})]}),e.jsx(i,{})]})};export{w as default};
