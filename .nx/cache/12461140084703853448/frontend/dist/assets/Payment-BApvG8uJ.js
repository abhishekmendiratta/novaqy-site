var e=Object.defineProperty,s=Object.defineProperties,t=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,n=(s,t,a)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,l=(e,s)=>{for(var t in s||(s={}))r.call(s,t)&&n(e,t,s[t]);if(a)for(var t of a(s))i.call(s,t)&&n(e,t,s[t]);return e},c=(e,a)=>s(e,t(a));import{j as o}from"./ui-vendor-CD6GsE3j.js";import{e as m,u as d,k as u,a as p}from"./react-vendor-tk5Uqt6k.js";import{H as h,F as x}from"./Footer-yqS9vQ2S.js";import{I as y,B as g}from"./input-vlty9GQ9.js";import{L as v}from"./label-CSITrqs2.js";import{C as f,b as j,d as b,a as N,e as w}from"./card-KNEg_dmD.js";import{C as P}from"./checkbox-BJT1C8QQ.js";import{B as C}from"./badge-qenvswId.js";import{a as k,u as S,b as $}from"./index-CzrRnDKD.js";import{r as _,a as B}from"./auth-vendor-CP-4ZW6D.js";import{p as E}from"./supabaseService-DdYkWjT-.js";import{e as D,b as T,L as F,y as A}from"./utils-vendor-cIoDbW7Q.js";import"./separator-BSLEYfof.js";import"./query-vendor-D3F-YppS.js";const O=m(_());var q,z={exports:{}};const U=m(q?z.exports:(q=1,z.exports=B().enc.Hex)),I=()=>{var e,s;const t=d(),a=u(),{toast:r}=k(),{currency:i,convertFromUSD:n,format:m}=S(),_=(null==(e=t.state)?void 0:e.selectedPlan)||"Essential Care",B=(null==(s=t.state)?void 0:s.planType)||"personal",q={"Essential Care":{name:"Essential Care",price:99,period:"year",features:["3 on-demand support sessions per year (remote)","PC health check & optimization (1× per year)","Basic antivirus setup (BYOL – bring your own license or trial)","Email support during business hours"]},"Advanced Care":{name:"Advanced Care",price:149,period:"year",features:["Unlimited remote support sessions (1 device)","Antivirus license included (1 device, 1 year)","Monthly PC tune-up & malware scans","Priority email & phone support","Basic data backup guidance"]},"Premium Care":{name:"Premium Care",price:249,period:"year",features:["Unlimited remote support sessions (3 devices)","Premium antivirus licenses included (3 devices, 1 year)","Weekly PC tune-ups & security scans","24/7 priority support (phone, email, chat)","Cloud backup service (50GB)","Digital privacy consultation","Annual on-site visit (within service area)"]},"Business Starter":{name:"Business Starter",price:299,period:"month",features:["Professional cloud infrastructure setup","Basic security implementation","Email & calendar system setup","Monthly system maintenance","Business hours support"]},"Business Professional":{name:"Business Professional",price:599,period:"month",features:["Advanced cloud infrastructure with redundancy","Comprehensive security suite","Team collaboration tools setup","Bi-weekly system optimization","Priority support with dedicated manager","Compliance assistance (GDPR, CCPA)"]},"Business Enterprise":{name:"Business Enterprise",price:999,period:"month",features:["Enterprise-grade infrastructure with 99.9% uptime SLA","Advanced threat protection & monitoring","Custom application development","Weekly system reviews & optimization","24/7 dedicated support team","Full compliance management","Disaster recovery planning"]},"Digital Marketing Bundle":{name:"Digital Marketing Bundle",price:1299,period:"month",features:["Comprehensive SEO optimization & monitoring","Social media management across all platforms","Professional content creation & copywriting","Google Ads & social media advertising campaigns","Email marketing automation & newsletters","Advanced analytics & performance reporting","Website optimization & conversion tracking","Brand management & online reputation monitoring"]}},z=q[_]||q["Essential Care"],[I,L]=p.useState({firstName:"",lastName:"",email:"",phone:"",address:"",city:"",state:"",zipCode:"",agreeToPolicies:!1,agreeToServiceDelivery:!1}),[M,R]=p.useState(!1);return o.jsxs("div",{className:"min-h-screen bg-gradient-subtle",children:[o.jsx(h,{}),o.jsx("div",{className:"container py-12 senior-spacing",children:o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h1",{className:"text-4xl font-bold mb-6 text-trust-blue senior-text-large",children:"Complete Your Purchase"}),o.jsx("p",{className:"text-xl text-muted-foreground senior-text-medium",children:"Secure checkout for your Novaqy subscription"})]}),o.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[o.jsx("div",{className:"lg:col-span-1",children:o.jsxs(f,{className:"senior-card sticky top-24",children:[o.jsx(j,{className:"bg-gradient-primary text-white rounded-t-lg",children:o.jsxs(b,{className:"flex items-center gap-3 text-xl",children:[o.jsx(D,{className:"w-6 h-6 text-white"}),"Order Summary"]})}),o.jsxs(N,{className:"space-y-6 p-6",children:[o.jsxs("div",{className:"border rounded-lg p-6 bg-gradient-subtle",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-xl text-trust-blue",children:z.name}),o.jsx(C,{variant:"secondary",className:"mt-2 text-base px-3 py-1",children:"personal"===B?"Personal Plan":"Business Plan"})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-3xl font-bold text-primary",children:m(z.price)}),o.jsxs("div",{className:"text-base text-muted-foreground",children:["per ",z.period," (",i,")"]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h4",{className:"font-medium text-lg text-trust-blue",children:"What's included:"}),o.jsx("ul",{className:"space-y-3",children:z.features.map((e,s)=>o.jsxs("li",{className:"text-base text-muted-foreground flex items-start gap-3",children:[o.jsx(D,{className:"w-5 h-5 text-trust-green mt-1 flex-shrink-0"}),e]},`${z.name}-feature-${s}`))})]})]}),o.jsx("div",{className:"space-y-2",children:o.jsxs("div",{className:"flex justify-between text-lg font-semibold",children:[o.jsx("span",{children:"Total"}),o.jsx("span",{children:m(z.price)})]})}),o.jsxs("div",{className:"flex items-center justify-center gap-4 pt-4 border-t",children:[o.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[o.jsx(T,{className:"w-4 h-4"}),"SSL Secured"]}),o.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[o.jsx(F,{className:"w-4 h-4"}),"256-bit Encryption"]})]})]})]})}),o.jsx("div",{className:"lg:col-span-2",children:o.jsxs("form",{onSubmit:e=>{return s=null,t=null,a=function*(){if(e.preventDefault(),yield $.trackPaymentAttempt({plan_name:z.name,plan_type:B,amount:n(z.price),currency:i,user_email:I.email,user_name:`${I.firstName} ${I.lastName}`}),["firstName","lastName","email","phone","address","city","state","zipCode"].filter(e=>!I[e]).length>0)r({title:"Missing Information",description:"Please fill in all required fields.",variant:"destructive"});else if(I.agreeToPolicies&&I.agreeToServiceDelivery){R(!0);try{const e="TXN"+Date.now()+Math.random().toString(36).substring(2,11),s="xhkupK",t="yUmEyYcZ3xI1BuXdSvmnz6RU1AP1mam2",a=n(z.price),l=a.toFixed(2),c=z.name,o=I.firstName,m=I.email,d=I.phone.replace(/\D/g,""),u=O(`${s}|${e}|${l}|${c}|${o}|${m}|||||||||||${t}`).toString(U),p={user_id:null,transaction_id:e,amount:a,currency:i,status:"pending",payment_method:"payu",plan_name:z.name,plan_type:B,payu_response:{status:"",mihpayid:"",txnid:e,amount:z.price.toString(),productinfo:z.name,firstname:"",email:"",phone:""},payment_gateway:"payu",gateway_transaction_id:null};if(!(yield E.createPayment(p)))return yield $.trackPaymentFailure("Database save failed",{transaction_id:e,amount:z.price}),r({title:"Database Error",description:"Failed to save payment data. Please try again.",variant:"destructive"}),void R(!1);yield $.trackActivity("payment_initiated",{transaction_id:e,amount:a,plan_name:z.name,gateway:"payu"});const h=document.createElement("form");h.method="POST",h.action="https://secure.payu.in/_payment";const x=`${window.location.origin}/payment/success?txnid=${e}`,y=`${window.location.origin}/payment/failed?txnid=${e}`,g={key:s,txnid:e,amount:l,currency:i,productinfo:c,firstname:o,email:m,phone:d,surl:x,furl:y,hash:u,service_provider:"payu_paisa"};Object.entries(g).forEach(([e,s])=>{const t=document.createElement("input");t.type="hidden",t.name=e,t.value=s,h.appendChild(t)}),document.body.appendChild(h),h.submit()}catch(s){console.error("Payment initiation error:",s),yield $.trackPaymentFailure("Payment initiation error",{error:s instanceof Error?s.message:"Unknown error",plan_name:z.name,amount:n(z.price)}),r({title:"Payment Error",description:"There was an error initiating payment. Please try again.",variant:"destructive"}),R(!1)}}else r({title:"Agreement Required",description:"Please agree to both the policies and service delivery terms.",variant:"destructive"})},new Promise((r,i)=>{var n=s=>{try{c(a.next(s))}catch(e){i(e)}},l=s=>{try{c(a.throw(s))}catch(e){i(e)}},c=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,l);c((a=a.apply(s,t)).next())});var s,t,a},className:"space-y-8",children:[o.jsxs(f,{className:"senior-card",children:[o.jsxs(j,{className:"bg-gradient-primary text-white rounded-t-lg",children:[o.jsx(b,{className:"text-xl",children:"Billing Information"}),o.jsx(w,{className:"text-white/90 text-base",children:"Please provide your billing details"})]}),o.jsxs(N,{className:"space-y-6 p-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsx(v,{htmlFor:"firstName",className:"text-base font-medium text-trust-blue",children:"First Name *"}),o.jsx(y,{id:"firstName",value:I.firstName,onChange:e=>L(s=>c(l({},s),{firstName:e.target.value})),required:!0,className:"senior-button h-12 text-base"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(v,{htmlFor:"lastName",className:"text-base font-medium text-trust-blue",children:"Last Name *"}),o.jsx(y,{id:"lastName",value:I.lastName,onChange:e=>L(s=>c(l({},s),{lastName:e.target.value})),required:!0,className:"senior-button h-12 text-base"})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(v,{htmlFor:"email",className:"text-base font-medium text-trust-blue",children:"Email Address *"}),o.jsx(y,{id:"email",type:"email",value:I.email,onChange:e=>L(s=>c(l({},s),{email:e.target.value})),required:!0,className:"senior-button h-12 text-base"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(v,{htmlFor:"phone",className:"text-base font-medium text-trust-blue",children:"Phone Number *"}),o.jsx(y,{id:"phone",type:"tel",value:I.phone,onChange:e=>{const s=(e=>{const s=e.replace(/\D/g,"");if(0===s.length)return"";if(s.startsWith("1")&&11===s.length)return`+${s.slice(0,1)} (${s.slice(1,4)}) ${s.slice(4,7)}-${s.slice(7,11)}`;if(10===s.length)return`(${s.slice(0,3)}) ${s.slice(3,6)}-${s.slice(6,10)}`;if(s.length>=11){const e=s.slice(0,s.length-10),t=s.slice(-10);return`+${e} (${t.slice(0,3)}) ${t.slice(3,6)}-${t.slice(6,10)}`}return s.length<=3?s:s.length<=6?`(${s.slice(0,3)}) ${s.slice(3)}`:`(${s.slice(0,3)}) ${s.slice(3,6)}-${s.slice(6)}`})(e.target.value);L(e=>c(l({},e),{phone:s}))},placeholder:"(123) 456-7890 or +1 (123) 456-7890",required:!0,className:"senior-button h-12 text-base"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(v,{htmlFor:"address",className:"text-base font-medium text-trust-blue",children:"Street Address *"}),o.jsx(y,{id:"address",value:I.address,onChange:e=>L(s=>c(l({},s),{address:e.target.value})),required:!0,className:"senior-button h-12 text-base"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsx(v,{htmlFor:"city",className:"text-base font-medium text-trust-blue",children:"City *"}),o.jsx(y,{id:"city",value:I.city,onChange:e=>L(s=>c(l({},s),{city:e.target.value})),required:!0,className:"senior-button h-12 text-base"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(v,{htmlFor:"state",className:"text-base font-medium text-trust-blue",children:"State *"}),o.jsx(y,{id:"state",value:I.state,onChange:e=>L(s=>c(l({},s),{state:e.target.value})),required:!0,className:"senior-button h-12 text-base"})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(v,{htmlFor:"zipCode",className:"text-base font-medium text-trust-blue",children:"ZIP Code *"}),o.jsx(y,{id:"zipCode",value:I.zipCode,onChange:e=>L(s=>c(l({},s),{zipCode:e.target.value})),required:!0,className:"senior-button h-12 text-base"})]})]})]}),o.jsxs(f,{className:"senior-card",children:[o.jsxs(j,{className:"bg-gradient-primary text-white rounded-t-lg",children:[o.jsxs(b,{className:"flex items-center gap-3 text-xl",children:[o.jsx(A,{className:"w-6 h-6"}),"Payment Information"]}),o.jsx(w,{className:"text-white/90 text-base",children:"You will be redirected to PayU's secure payment gateway to complete your payment"})]}),o.jsx(N,{className:"p-6",children:o.jsxs("div",{className:"text-center py-8",children:[o.jsx(T,{className:"w-16 h-16 text-trust-green mx-auto mb-6"}),o.jsx("p",{className:"text-base text-muted-foreground leading-relaxed",children:"Your payment information will be securely processed by PayU, a trusted payment gateway with bank-level security and encryption."})]})})]}),o.jsxs(f,{className:"senior-card",children:[o.jsxs(j,{className:"bg-gradient-primary text-white rounded-t-lg",children:[o.jsx(b,{className:"text-xl",children:"Terms & Agreements"}),o.jsx(w,{className:"text-white/90 text-base",children:"Please review and agree to the following terms"})]}),o.jsxs(N,{className:"space-y-6 p-6",children:[o.jsxs("div",{className:"flex items-start space-x-4",children:[o.jsx(P,{id:"policies",checked:I.agreeToPolicies,onCheckedChange:e=>L(s=>c(l({},s),{agreeToPolicies:e})),className:"mt-1 h-5 w-5"}),o.jsxs(v,{htmlFor:"policies",className:"text-base leading-relaxed cursor-pointer",children:["I agree to the"," ",o.jsx("a",{href:"/terms",target:"_blank",className:"text-primary hover:underline font-medium",children:"Terms of Service"}),","," ",o.jsx("a",{href:"/return-refund",target:"_blank",className:"text-primary hover:underline font-medium",children:"Return & Refund Policy"}),","," ",o.jsx("a",{href:"/remote-disclaimer",target:"_blank",className:"text-primary hover:underline font-medium",children:"Remote Support Disclaimer"}),", and"," ",o.jsx("a",{href:"/end-user-agreement",target:"_blank",className:"text-primary hover:underline font-medium",children:"End User License Agreement"})," ","*"]})]}),o.jsxs("div",{className:"flex items-start space-x-4",children:[o.jsx(P,{id:"service-delivery",checked:I.agreeToServiceDelivery,onCheckedChange:e=>L(s=>c(l({},s),{agreeToServiceDelivery:e})),className:"mt-1 h-5 w-5"}),o.jsxs(v,{htmlFor:"service-delivery",className:"text-base leading-relaxed cursor-pointer",children:["I agree to electronic service delivery and acknowledge that software licenses will be delivered via email within 24-48 hours, and I understand the"," ",o.jsx("a",{href:"/shipping",target:"_blank",className:"text-primary hover:underline font-medium",children:"Shipping Policy"})," ","for any physical items *"]})]})]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[o.jsx(g,{type:"button",variant:"outline",onClick:()=>a("/pricing"),className:"senior-button flex-1 h-14 text-lg",children:"Back to Pricing"}),o.jsx(g,{type:"submit",disabled:M||!I.agreeToPolicies||!I.agreeToServiceDelivery,className:"senior-button flex-1 h-14 text-lg transition-all duration-200 "+(I.agreeToPolicies&&I.agreeToServiceDelivery?"bg-gradient-primary hover:opacity-90 text-white shadow-lg":"bg-gray-400 cursor-not-allowed"),children:M?"Redirecting to PayU...":`Proceed to Payment - ${m(z.price)}`})]})]})})]})]})}),o.jsx(x,{})]})};export{I as default};
