var t=Object.defineProperty,e=Object.defineProperties,s=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,a=(e,s,o)=>s in e?t(e,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[s]=o,n=(t,e)=>{for(var s in e||(e={}))i.call(e,s)&&a(t,s,e[s]);if(o)for(var s of o(e))r.call(e,s)&&a(t,s,e[s]);return t},l=(t,o)=>e(t,s(o)),c=(t,e,s)=>a(t,"symbol"!=typeof e?e+"":e,s),g=(t,e,s)=>new Promise((o,i)=>{var r=t=>{try{n(s.next(t))}catch(e){i(e)}},a=t=>{try{n(s.throw(t))}catch(e){i(e)}},n=t=>t.done?o(t.value):Promise.resolve(t.value).then(r,a);n((s=s.apply(t,e)).next())});const m=class t{constructor(){c(this,"listeners",new Map),this.initializeDefaultData()}static getInstance(){return t.instance||(t.instance=new t),t.instance}initializeDefaultData(){const e=localStorage.getItem("cms_seed_version")!==t.SEED_VERSION;e&&(localStorage.removeItem("cms_blog_posts"),localStorage.removeItem("cms_case_studies"),localStorage.removeItem("cms_customer_stories")),localStorage.getItem("cms_blog_posts")||this.loadFromJSONFiles(),localStorage.getItem("cms_case_studies")||this.loadCaseStudiesFromJSON(),localStorage.getItem("cms_customer_stories")||this.loadCustomerStoriesFromJSON(),localStorage.getItem("cms_page_content")||this.initializePageContent(),e&&localStorage.setItem("cms_seed_version",t.SEED_VERSION)}loadFromJSONFiles(){return g(this,null,function*(){try{const t=yield fetch("/data/blog-posts.json"),e=yield t.json();localStorage.setItem("cms_blog_posts",JSON.stringify(e))}catch(t){console.error("Failed to load blog posts from JSON:",t),localStorage.setItem("cms_blog_posts",JSON.stringify([]))}})}loadCaseStudiesFromJSON(){return g(this,null,function*(){try{const t=yield fetch("/data/case-studies.json"),e=yield t.json();localStorage.setItem("cms_case_studies",JSON.stringify(e))}catch(t){console.error("Failed to load case studies from JSON:",t),localStorage.setItem("cms_case_studies",JSON.stringify([]))}})}loadCustomerStoriesFromJSON(){return g(this,null,function*(){try{const t=yield fetch("/data/customer-stories.json"),e=yield t.json();localStorage.setItem("cms_customer_stories",JSON.stringify(e))}catch(t){console.error("Failed to load customer stories from JSON:",t),localStorage.setItem("cms_customer_stories",JSON.stringify([]))}})}initializePageContent(){const t=[{id:"homepage",title:"Homepage",content:"Homepage content managed through CMS",metaTitle:"Novaqy Cloud LLP - Remote Tech Support & Managed Services",metaDescription:"Professional remote tech support and managed IT services for seniors and businesses. Trusted by 10,000+ customers in US & Canada.",lastModified:(new Date).toISOString(),status:"published"},{id:"about",title:"About Us",content:"About page content",metaTitle:"About Novaqy Cloud LLP",metaDescription:"Learn about Novaqy Cloud LLP, your trusted partner for remote tech support and managed IT services.",lastModified:(new Date).toISOString(),status:"published"}];localStorage.setItem("cms_page_content",JSON.stringify(t))}getBlogPosts(){const t=localStorage.getItem("cms_blog_posts");return t?JSON.parse(t):[]}getPublishedBlogPosts(){return this.getBlogPosts().filter(t=>"published"===t.status)}getBlogPostBySlug(t){return this.getBlogPosts().find(e=>e.slug===t)||null}saveBlogPost(t){const e=this.getBlogPosts(),s=e.findIndex(e=>e.id===t.id);s>=0?e[s]=l(n({},t),{publishedAt:(new Date).toISOString().split("T")[0]}):e.push(l(n({},t),{id:Date.now(),publishedAt:(new Date).toISOString().split("T")[0]})),localStorage.setItem("cms_blog_posts",JSON.stringify(e)),this.notifyListeners("blog_posts")}deleteBlogPost(t){const e=this.getBlogPosts().filter(e=>e.id!==t);localStorage.setItem("cms_blog_posts",JSON.stringify(e)),this.notifyListeners("blog_posts")}getCaseStudies(){const t=localStorage.getItem("cms_case_studies");return t?JSON.parse(t):[]}getPublishedCaseStudies(){return this.getCaseStudies().filter(t=>"published"===t.status)}saveCaseStudy(t){const e=this.getCaseStudies(),s=e.findIndex(e=>e.id===t.id);s>=0?e[s]=l(n({},t),{publishedAt:(new Date).toISOString().split("T")[0]}):e.push(l(n({},t),{id:Date.now(),publishedAt:(new Date).toISOString().split("T")[0]})),localStorage.setItem("cms_case_studies",JSON.stringify(e)),this.notifyListeners("case_studies")}deleteCaseStudy(t){const e=this.getCaseStudies().filter(e=>e.id!==t);localStorage.setItem("cms_case_studies",JSON.stringify(e)),this.notifyListeners("case_studies")}getCustomerStories(){const t=localStorage.getItem("cms_customer_stories");return t?JSON.parse(t):[]}getPublishedCustomerStories(){return this.getCustomerStories().filter(t=>"published"===t.status)}saveCustomerStory(t){const e=this.getCustomerStories(),s=e.findIndex(e=>e.id===t.id);s>=0?e[s]=l(n({},t),{publishedAt:(new Date).toISOString().split("T")[0]}):e.push(l(n({},t),{id:Date.now(),publishedAt:(new Date).toISOString().split("T")[0]})),localStorage.setItem("cms_customer_stories",JSON.stringify(e)),this.notifyListeners("customer_stories")}deleteCustomerStory(t){const e=this.getCustomerStories().filter(e=>e.id!==t);localStorage.setItem("cms_customer_stories",JSON.stringify(e)),this.notifyListeners("customer_stories")}getPageContent(t){return this.getAllPageContent().find(e=>e.id===t)||null}getAllPageContent(){const t=localStorage.getItem("cms_page_content");return t?JSON.parse(t):[]}savePageContent(t){const e=this.getAllPageContent(),s=e.findIndex(e=>e.id===t.id);s>=0?e[s]=l(n({},t),{lastModified:(new Date).toISOString()}):e.push(l(n({},t),{lastModified:(new Date).toISOString()})),localStorage.setItem("cms_page_content",JSON.stringify(e)),this.notifyListeners("page_content")}getTestimonials(){const t=localStorage.getItem("cms_testimonials");return t?JSON.parse(t):[]}saveTestimonial(t){const e=this.getTestimonials(),s=e.findIndex(e=>e.id===t.id);s>=0?e[s]=t:e.push(l(n({},t),{id:Date.now()})),localStorage.setItem("cms_testimonials",JSON.stringify(e)),this.notifyListeners("testimonials")}deleteTestimonial(t){const e=this.getTestimonials().filter(e=>e.id!==t);localStorage.setItem("cms_testimonials",JSON.stringify(e)),this.notifyListeners("testimonials")}subscribe(t,e){return this.listeners.has(t)||this.listeners.set(t,new Set),this.listeners.get(t).add(e),()=>{const s=this.listeners.get(t);s&&s.delete(e)}}notifyListeners(t){const e=this.listeners.get(t);e&&e.forEach(t=>t())}exportData(){const t={blogPosts:this.getBlogPosts(),caseStudies:this.getCaseStudies(),customerStories:this.getCustomerStories(),pageContent:this.getAllPageContent(),testimonials:this.getTestimonials(),exportedAt:(new Date).toISOString()};return JSON.stringify(t,null,2)}importData(t){try{const e=JSON.parse(t);return e.blogPosts&&localStorage.setItem("cms_blog_posts",JSON.stringify(e.blogPosts)),e.caseStudies&&localStorage.setItem("cms_case_studies",JSON.stringify(e.caseStudies)),e.customerStories&&localStorage.setItem("cms_customer_stories",JSON.stringify(e.customerStories)),e.pageContent&&localStorage.setItem("cms_page_content",JSON.stringify(e.pageContent)),e.testimonials&&localStorage.setItem("cms_testimonials",JSON.stringify(e.testimonials)),this.listeners.forEach((t,e)=>{t.forEach(t=>t())}),!0}catch(e){return console.error("Failed to import data:",e),!1}}clearAllData(){localStorage.removeItem("cms_blog_posts"),localStorage.removeItem("cms_case_studies"),localStorage.removeItem("cms_customer_stories"),localStorage.removeItem("cms_page_content"),localStorage.removeItem("cms_testimonials"),this.initializeDefaultData(),this.listeners.forEach((t,e)=>{t.forEach(t=>t())})}};c(m,"instance"),c(m,"SEED_VERSION","1.1.0");const S=m.getInstance();export{S as d};
